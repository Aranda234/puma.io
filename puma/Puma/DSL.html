<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Puma::DSL &mdash; Puma</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Puma::DSL",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../index.html'>Puma</a> &raquo; 
      <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../Puma.html" title="Puma (module)">Puma</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DSL&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Puma::DSL</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="ConfigDefault.html" title="Puma::ConfigDefault (module)">ConfigDefault</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L30'>lib/puma/dsl.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The methods that are available for use inside the config file. These same methods are used in <a href="../Puma.html" title="Puma (module)">::Puma</a> cli and the rack handler internally.</p>

<p>Used manually (via <a href="CLI.html" title="Puma::CLI (class)">CLI</a> class):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Configuration.html#new-class_method" title="Puma::Configuration.new (method)">new</a></span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user_config'>user_config</span><span class='op'>|</span>
  <span class='id identifier rubyid_user_config'>user_config</span><span class='period'>.</span><span class='id identifier rubyid_port'>port</span> <span class='int'>3001</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span><span class='rbracket'>]</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tcp://127.0.0.1:3001</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>Used to load file:</p>

<pre class="code ruby"><code class="ruby">$ cat puma_config.rb
  port 3002

config = Configuration.new(config_file: &quot;puma_config.rb&quot;)
config.load

puts config.options[:binds]
# =&gt; &quot;tcp://127.0.0.1:3002&quot;
</code></pre>

<p>Detailed docs can be found in `examples/config.rb`</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="ConfigDefault.html" title="Puma::ConfigDefault (module)">ConfigDefault</a> - Included</h3>
  <p  class='inherited'>
    <a href="ConfigDefault.html#DefaultRackup-constant" title="Puma::ConfigDefault::DefaultRackup (constant)">DefaultRackup</a>, 
    <a href="ConfigDefault.html#DefaultTCPHost-constant" title="Puma::ConfigDefault::DefaultTCPHost (constant)">DefaultTCPHost</a>, 
    <a href="ConfigDefault.html#DefaultTCPPort-constant" title="Puma::ConfigDefault::DefaultTCPPort (constant)">DefaultTCPPort</a>, 
    <a href="ConfigDefault.html#DefaultWorkerShutdownTimeout-constant" title="Puma::ConfigDefault::DefaultWorkerShutdownTimeout (constant)">DefaultWorkerShutdownTimeout</a>, 
    <a href="ConfigDefault.html#DefaultWorkerTimeout-constant" title="Puma::ConfigDefault::DefaultWorkerTimeout (constant)">DefaultWorkerTimeout</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options, config)  &#x21d2; DSL </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#_load_from-instance_method" title="#_load_from (instance method)">#<strong>_load_from</strong>(path)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#_offer_plugins-instance_method" title="#_offer_plugins (instance method)">#<strong>_offer_plugins</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#activate_control_app-instance_method" title="#activate_control_app (instance method)">#<strong>activate_control_app</strong>(url = &quot;auto&quot;, opts = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Start the <a href="../Puma.html" title="Puma (module)">::Puma</a> control rack app on <code>url</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#after_worker_boot-instance_method" title="#after_worker_boot (instance method)">#<strong>after_worker_boot</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#after_worker_fork-instance_method" title="Puma::DSL#after_worker_fork (method)">#after_worker_fork</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#after_worker_fork-instance_method" title="#after_worker_fork (instance method)">#<strong>after_worker_fork</strong>(&amp;block)  </a>
      (also: #after_worker_boot)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Code to run in the master after it starts a worker.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#app-instance_method" title="#app (instance method)">#<strong>app</strong>(obj = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>obj</code> or <code>block</code> as the <a href="Rack.html" title="Puma::Rack (module)">Rack</a> app.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#before_fork-instance_method" title="#before_fork (instance method)">#<strong>before_fork</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Code to run immediately before master process forks workers (once on boot).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#bind-instance_method" title="#bind (instance method)">#<strong>bind</strong>(url)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a binding for the server to <code>url</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clean_thread_locals-instance_method" title="#clean_thread_locals (instance method)">#<strong>clean_thread_locals</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Work around leaky apps that leave garbage in Thread locals across requests.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_binds!-instance_method" title="#clear_binds! (instance method)">#<strong>clear_binds!</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#daemonize-instance_method" title="#daemonize (instance method)">#<strong>daemonize</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Daemonize the server into the background.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#debug-instance_method" title="#debug (instance method)">#<strong>debug</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Show debugging info.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_host-instance_method" title="#default_host (instance method)">#<strong>default_host</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#directory-instance_method" title="#directory (instance method)">#<strong>directory</strong>(dir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The directory to operate out of.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drain_on_shutdown-instance_method" title="#drain_on_shutdown (instance method)">#<strong>drain_on_shutdown</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When shutting down, drain the accept socket of pending connections and process them.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#early_hints-instance_method" title="#early_hints (instance method)">#<strong>early_hints</strong>(answer = true)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#environment-instance_method" title="#environment (instance method)">#<strong>environment</strong>(environment)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the environment in which the Rack&#39;s app will run.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#first_data_timeout-instance_method" title="#first_data_timeout (instance method)">#<strong>first_data_timeout</strong>(seconds)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define how long the tcp socket stays open, if no data has been received.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#force_shutdown_after-instance_method" title="#force_shutdown_after (instance method)">#<strong>force_shutdown_after</strong>(val = :forever)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>How long to wait for threads to stop when shutting them down.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(key, default = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inject-instance_method" title="#inject (instance method)">#<strong>inject</strong>(&amp;blk)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load-instance_method" title="#load (instance method)">#<strong>load</strong>(file)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load additional configuration from a file Files get loaded later via <a href="Configuration.html#load-instance_method" title="Puma::Configuration#load (method)">Configuration#load</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#log_requests-instance_method" title="#log_requests (instance method)">#<strong>log_requests</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Enable request logging.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lowlevel_error_handler-instance_method" title="#lowlevel_error_handler (instance method)">#<strong>lowlevel_error_handler</strong>(obj = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>obj</code> or <code>block</code> as the low level error handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_restart-instance_method" title="#on_restart (instance method)">#<strong>on_restart</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Code to run before doing a restart.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_boot-instance_method" title="#on_worker_boot (instance method)">#<strong>on_worker_boot</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Code to run in a worker when it boots to setup the process before booting the app.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_fork-instance_method" title="#on_worker_fork (instance method)">#<strong>on_worker_fork</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Code to run in the master when it is about to create the worker by forking itself.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_worker_shutdown-instance_method" title="#on_worker_shutdown (instance method)">#<strong>on_worker_shutdown</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Code to run immediately before a worker shuts down (after it has finished processing HTTP requests).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#persistent_timeout-instance_method" title="#persistent_timeout (instance method)">#<strong>persistent_timeout</strong>(seconds)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define how long persistent connections can be idle before puma closes them.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pidfile-instance_method" title="#pidfile (instance method)">#<strong>pidfile</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Store the pid of the server in the file at <code>path</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#plugin-instance_method" title="#plugin (instance method)">#<strong>plugin</strong>(name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load the named plugin for use by this configuration.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#port-instance_method" title="#port (instance method)">#<strong>port</strong>(port, host = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define the TCP port to bind to.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#preload_app!-instance_method" title="#preload_app! (instance method)">#<strong>preload_app!</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Preload the application before starting the workers and setting up the listen ports.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prune_bundler-instance_method" title="#prune_bundler (instance method)">#<strong>prune_bundler</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This option is used to allow your app and its gems to be properly reloaded when not using preload.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#queue_requests-instance_method" title="#queue_requests (instance method)">#<strong>queue_requests</strong>(answer = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When set to true (the default), workers accept all requests and queue them before passing them to the handlers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quiet-instance_method" title="#quiet (instance method)">#<strong>quiet</strong>(which = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Disable request logging.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rackup-instance_method" title="#rackup (instance method)">#<strong>rackup</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load <code>path</code> as a rackup file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#restart_command-instance_method" title="#restart_command (instance method)">#<strong>restart_command</strong>(cmd)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Command to use to restart puma.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_default_host-instance_method" title="#set_default_host (instance method)">#<strong>set_default_host</strong>(host)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_remote_address-instance_method" title="#set_remote_address (instance method)">#<strong>set_remote_address</strong>(val = :socket)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Control how the remote address of the connection is set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#shutdown_debug-instance_method" title="#shutdown_debug (instance method)">#<strong>shutdown_debug</strong>(val = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When a shutdown is requested, the backtraces of all the threads will be written to $stdout.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ssl_bind-instance_method" title="#ssl_bind (instance method)">#<strong>ssl_bind</strong>(host, port, opts)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#state_path-instance_method" title="#state_path (instance method)">#<strong>state_path</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use <code>path</code> as the file to store the server info state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stdout_redirect-instance_method" title="#stdout_redirect (instance method)">#<strong>stdout_redirect</strong>(stdout = nil, stderr = nil, append = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Redirect STDOUT and STDERR to files specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tag-instance_method" title="#tag (instance method)">#<strong>tag</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Additional text to display in process listing.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tcp_mode-instance_method" title="#tcp_mode (instance method)">#<strong>tcp_mode</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Run the app as a raw TCP app instead of an HTTP rack app.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tcp_mode!-instance_method" title="#tcp_mode! (instance method)">#<strong>tcp_mode!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Run Puma in TCP mode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#threads-instance_method" title="#threads (instance method)">#<strong>threads</strong>(min, max)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Configure <code>min</code> to be the minimum number of threads to use to answer requests and <code>max</code> the maximum.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_boot_timeout-instance_method" title="#worker_boot_timeout (instance method)">#<strong>worker_boot_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Set the timeout for workers to boot.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_directory-instance_method" title="#worker_directory (instance method)">#<strong>worker_directory</strong>(dir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>DEPRECATED: The directory to operate out of.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_shutdown_timeout-instance_method" title="#worker_shutdown_timeout (instance method)">#<strong>worker_shutdown_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Set the timeout for worker shutdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#worker_timeout-instance_method" title="#worker_timeout (instance method)">#<strong>worker_timeout</strong>(timeout)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* Set the timeout for workers in seconds When set the master process will terminate any workers that have not checked in within the given <code>timeout</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#workers-instance_method" title="#workers (instance method)">#<strong>workers</strong>(count)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>*Cluster mode only* How many worker processes to run.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(options, config)  &#x21d2; <code>DSL</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L33-L38'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='33' data-end='38'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 33</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span>  <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>

  <span class='ivar'>@plugins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="_load_from-instance_method">
  <h3 class='signature  first'>
    #<strong>_load_from</strong>(path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L40-L47'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='40' data-end='47'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 40</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__load_from'>_load_from</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span>
    <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid__offer_plugins'>_offer_plugins</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="_offer_plugins-instance_method">
  <h3 class='signature '>
    #<strong>_offer_plugins</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L49-L58'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='49' data-end='58'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 49</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__offer_plugins'>_offer_plugins</span>
  <span class='ivar'>@plugins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'>config</span>
      <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
      <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span> <span class='kw'>self</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@plugins</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="activate_control_app-instance_method">
  <h3 class='signature '>
    #<strong>activate_control_app</strong>(url = &quot;auto&quot;, opts = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Start the <a href="../Puma.html" title="Puma (module)">::Puma</a> control rack app on <code>url</code>. This app can be communicated with to control the main server.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L96-L114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='96' data-end='114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 96</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_activate_control_app'>activate_control_app</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auto</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_url'>url</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auto</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span><span class='period'>.</span><span class='id identifier rubyid_temp_path'><a href="Configuration.html#temp_path-class_method" title="Puma::Configuration.temp_path (method)">temp_path</a></span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control_url'>control_url</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unix://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control_url_temp'>control_url_temp</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>else</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control_url'>control_url</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_url'>url</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_no_token'>no_token</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_none'>none</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_auth_token'>auth_token</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_auth_token'>auth_token</span> <span class='op'>||=</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span><span class='period'>.</span><span class='id identifier rubyid_random_token'><a href="Configuration.html#random_token-class_method" title="Puma::Configuration.random_token (method)">random_token</a></span>
  <span class='kw'>end</span>

  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control_auth_token'>control_auth_token</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_auth_token'>auth_token</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control_url_umask'>control_url_umask</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_umask'>umask</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_umask'>umask</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="after_worker_boot-instance_method">
  <h3 class='signature '>
    #<strong>after_worker_boot</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#after_worker_fork-instance_method" title="Puma::DSL#after_worker_fork (method)">#after_worker_fork</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L376-L376'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='376' data-end='376'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 376</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_boot'>after_worker_boot</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="after_worker_fork-instance_method">
  <h3 class='signature '>
    #<strong>after_worker_fork</strong>(&amp;block)  
    <span class='aliases'>Also known as: <span class='names'>#after_worker_boot</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Code to run in the master after it starts a worker.</p>

<p>This can be called multiple times to add hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L371-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='371' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 371</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_after_worker_fork'>after_worker_fork</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="app-instance_method">
  <h3 class='signature '>
    #<strong>app</strong>(obj = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>obj</code> or <code>block</code> as the <a href="Rack.html" title="Puma::Rack (module)">Rack</a> app. This allows a config file to be the app itself.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L85-L91'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='85' data-end='91'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 85</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_app'>app</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_obj'>obj</span> <span class='op'>||=</span> <span class='id identifier rubyid_block'>block</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Provide either a #call&#39;able or a block</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_obj'>obj</span>

  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_app'>app</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before_fork-instance_method">
  <h3 class='signature '>
    #<strong>before_fork</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Code to run immediately before master process forks workers (once on boot). These hooks can block if necessary to wait for background operations unknown to puma to finish before the process terminates. This can be used to close any connections to remote servers (database, redis, …) that were opened when preloading the code</p>

<p>This can be called multiple times to add hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L329-L332'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='329' data-end='332'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 329</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before_fork'>before_fork</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_fork'>before_fork</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_fork'>before_fork</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bind-instance_method">
  <h3 class='signature '>
    #<strong>bind</strong>(url)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>multiple urls can be bound to, calling `bind` does not overwrite previous bindings.</p>
</div>
  </div>


<p>Adds a binding for the server to <code>url</code>. tcp://, unix://, and ssl:// are the only accepted protocols. Use query parameters within the url to specify options.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Explicitly the socket backlog depth (default is 1024)</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/puma.sock?backlog=2048</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Set up ssl cert</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ssl://127.0.0.1:9292?key=key.key&amp;cert=cert.pem</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Prefer low-latency over higher throughput (via `Socket::TCP_NODELAY`)</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tcp://0.0.0.0:9292?low_latency=true</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Set socket permissions</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unix:///var/run/puma.sock?umask=0111</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
  </div>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L139-L142'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='139' data-end='142'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 139</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_url'>url</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clean_thread_locals-instance_method">
  <h3 class='signature '>
    #<strong>clean_thread_locals</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Work around leaky apps that leave garbage in Thread locals across requests</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L171-L173'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='171' data-end='173'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 171</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clean_thread_locals'>clean_thread_locals</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_clean_thread_locals'>clean_thread_locals</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_binds!-instance_method">
  <h3 class='signature '>
    #<strong>clear_binds!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L144-L146'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='144' data-end='146'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_binds!'>clear_binds!</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_binds'>binds</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="daemonize-instance_method">
  <h3 class='signature '>
    #<strong>daemonize</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Daemonize the server into the background. Highly suggest that this be combined with <a href="#pidfile-instance_method" title="Puma::DSL#pidfile (method)">#pidfile</a> and <a href="#stdout_redirect-instance_method" title="Puma::DSL#stdout_redirect (method)">#stdout_redirect</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L177-L179'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='177' data-end='179'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 177</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_daemonize'>daemonize</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_daemon'>daemon</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="debug-instance_method">
  <h3 class='signature '>
    #<strong>debug</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Show debugging info</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L251-L253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='251' data-end='253'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 251</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_debug'>debug</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_debug'>debug</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_host-instance_method">
  <h3 class='signature '>
    #<strong>default_host</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L64-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_host'>default_host</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_default_host'>default_host</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><a href="Configuration.html" title="Puma::Configuration (class)">Configuration</a></span><span class='op'>::</span><span class='const'><a href="ConfigDefault.html#DefaultTCPHost-constant" title="Puma::ConfigDefault::DefaultTCPHost (constant)">DefaultTCPHost</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="directory-instance_method">
  <h3 class='signature '>
    #<strong>directory</strong>(dir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The directory to operate out of.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L379-L381'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='379' data-end='381'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 379</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_directory'>directory</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_directory'>directory</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drain_on_shutdown-instance_method">
  <h3 class='signature '>
    #<strong>drain_on_shutdown</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When shutting down, drain the accept socket of pending connections and process them. This loops over the accept socket until there are no more read events and then stops looking and waits for the requests to finish.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L185-L187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='185' data-end='187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 185</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drain_on_shutdown'>drain_on_shutdown</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_drain_on_shutdown'>drain_on_shutdown</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="early_hints-instance_method">
  <h3 class='signature '>
    #<strong>early_hints</strong>(answer = true)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L267-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='267' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 267</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_early_hints'>early_hints</span><span class='lparen'>(</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_early_hints'>early_hints</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="environment-instance_method">
  <h3 class='signature '>
    #<strong>environment</strong>(environment)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the environment in which the Rack&#39;s app will run.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L190-L192'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='190' data-end='192'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 190</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_environment'>environment</span><span class='lparen'>(</span><span class='id identifier rubyid_environment'>environment</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_environment'>environment</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_environment'>environment</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="first_data_timeout-instance_method">
  <h3 class='signature '>
    #<strong>first_data_timeout</strong>(seconds)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define how long the tcp socket stays open, if no data has been received</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L164-L166'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='164' data-end='166'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 164</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_first_data_timeout'>first_data_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_first_data_timeout'>first_data_timeout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_shutdown_after-instance_method">
  <h3 class='signature '>
    #<strong>force_shutdown_after</strong>(val = :forever)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>How long to wait for threads to stop when shutting them down. Defaults to <code>:forever</code>. Specifying <code>:immediately</code> will cause <a href="../Puma.html" title="Puma (module)">::Puma</a> to kill the threads immediately.  Otherwise the value is the number of seconds to wait.</p>

<p><a href="../Puma.html" title="Puma (module)">::Puma</a> always waits a few seconds after killing a thread for it to try to finish up it&#39;s work, even in <code>:immediately</code> mode.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L201-L212'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='201' data-end='212'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 201</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_force_shutdown_after'>force_shutdown_after</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='symbeg'>:</span><span class='id identifier rubyid_forever'>forever</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span>
      <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_forever'>forever</span>
        <span class='op'>-</span><span class='int'>1</span>
      <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_immediately'>immediately</span>
        <span class='int'>0</span>
      <span class='kw'>else</span>
        <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_force_shutdown_after'>force_shutdown_after</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get-instance_method">
  <h3 class='signature '>
    #<strong>get</strong>(key, default = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L72-L74'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='72' data-end='74'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 72</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_default'>default</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_default'>default</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inject-instance_method">
  <h3 class='signature '>
    #<strong>inject</strong>(&amp;blk)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L68-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-instance_method">
  <h3 class='signature '>
    #<strong>load</strong>(file)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load additional configuration from a file Files get loaded later via <a href="Configuration.html#load-instance_method" title="Puma::Configuration#load (method)">Configuration#load</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L118-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='118' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_config_files'>config_files</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_config_files'>config_files</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_file'>file</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="log_requests-instance_method">
  <h3 class='signature '>
    #<strong>log_requests</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enable request logging</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L245-L247'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='245' data-end='247'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 245</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_log_requests'>log_requests</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_log_requests'>log_requests</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lowlevel_error_handler-instance_method">
  <h3 class='signature '>
    #<strong>lowlevel_error_handler</strong>(obj = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>obj</code> or <code>block</code> as the low level error handler. This allows a config file to change the default error on the server.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L405-L409'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='405' data-end='409'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 405</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lowlevel_error_handler'>lowlevel_error_handler</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_obj'>obj</span> <span class='op'>||=</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Provide either a #call&#39;able or a block</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_obj'>obj</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_lowlevel_error_handler'>lowlevel_error_handler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_restart-instance_method">
  <h3 class='signature '>
    #<strong>on_restart</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Code to run before doing a restart. This code should close logfiles, database connections, etc.</p>

<p>This can be called multiple times to add code each time.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L219-L222'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='219' data-end='222'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 219</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_restart'>on_restart</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_on_restart'>on_restart</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_on_restart'>on_restart</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_boot-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_boot</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Code to run in a worker when it boots to setup the process before booting the app.</p>

<p>This can be called multiple times to add hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L339-L342'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='339' data-end='342'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 339</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_boot'>on_worker_boot</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_boot'>before_worker_boot</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_boot'>before_worker_boot</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_fork-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_fork</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Code to run in the master when it is about to create the worker by forking itself.</p>

<p>This can be called multiple times to add hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L361-L364'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='361' data-end='364'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 361</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_fork'>on_worker_fork</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_fork'>before_worker_fork</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_fork'>before_worker_fork</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_worker_shutdown-instance_method">
  <h3 class='signature '>
    #<strong>on_worker_shutdown</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Code to run immediately before a worker shuts down (after it has finished processing HTTP requests). These hooks can block if necessary to wait for background operations unknown to puma to finish before the process terminates.</p>

<p>This can be called multiple times to add hooks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L351-L354'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='351' data-end='354'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 351</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_worker_shutdown'>on_worker_shutdown</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_shutdown'>before_worker_shutdown</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_before_worker_shutdown'>before_worker_shutdown</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="persistent_timeout-instance_method">
  <h3 class='signature '>
    #<strong>persistent_timeout</strong>(seconds)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define how long persistent connections can be idle before puma closes them</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L158-L160'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='158' data-end='160'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 158</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_persistent_timeout'>persistent_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_persistent_timeout'>persistent_timeout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pidfile-instance_method">
  <h3 class='signature '>
    #<strong>pidfile</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Store the pid of the server in the file at <code>path</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L233-L235'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='233' data-end='235'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 233</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pidfile'>pidfile</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_pidfile'>pidfile</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="plugin-instance_method">
  <h3 class='signature '>
    #<strong>plugin</strong>(name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load the named plugin for use by this configuration</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L78-L80'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='78' data-end='80'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 78</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_plugin'>plugin</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@plugins</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_load_plugin'>load_plugin</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="port-instance_method">
  <h3 class='signature '>
    #<strong>port</strong>(port, host = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define the TCP port to bind to. Use <a href="#bind-instance_method" title="Puma::DSL#bind (method)">#bind</a> for more advanced options.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L150-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='150' data-end='153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 150</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_port'>port</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_host'>host</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_host'>host</span> <span class='op'>||=</span> <span class='id identifier rubyid_default_host'>default_host</span>
  <span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tcp://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="preload_app!-instance_method">
  <h3 class='signature '>
    #<strong>preload_app!</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Preload the application before starting the workers and setting up the listen ports. This conflicts with using the phased restart feature, you can&#39;t use both.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L398-L400'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='398' data-end='400'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 398</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_preload_app!'>preload_app!</span><span class='lparen'>(</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_preload_app'>preload_app</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prune_bundler-instance_method">
  <h3 class='signature '>
    #<strong>prune_bundler</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This option is used to allow your app and its gems to be properly reloaded when not using preload.</p>

<p>When set, if puma detects that it&#39;s been invoked in the context of Bundler, it will cleanup the environment and re-run itself outside the Bundler environment, but directly using the files that Bundler has setup.</p>

<p>This means that puma is now decoupled from your Bundler context and when each worker loads, it will be loading a new Bundler context and thus can float around as the release dictates.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L423-L425'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='423' data-end='425'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 423</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prune_bundler'>prune_bundler</span><span class='lparen'>(</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_prune_bundler'>prune_bundler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_requests-instance_method">
  <h3 class='signature '>
    #<strong>queue_requests</strong>(answer = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When set to true (the default), workers accept all requests and queue them before passing them to the handlers. When set to false, each worker process accepts exactly as many requests as it is configured to simultaneously handle.</p>

<p>Queueing requests generally improves performance. In some cases, such as a single threaded application, it may be better to ensure requests get balanced across workers.</p>

<p>Note that setting this to false disables HTTP keepalive and slow clients will occupy a handler thread while the request is being sent. A reverse proxy, such as nginx, can handle slow clients and queue requests before they reach puma.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L463-L465'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='463' data-end='465'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 463</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_requests'>queue_requests</span><span class='lparen'>(</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_queue_requests'>queue_requests</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_answer'>answer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quiet-instance_method">
  <h3 class='signature '>
    #<strong>quiet</strong>(which = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Disable request logging.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L239-L241'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='239' data-end='241'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 239</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quiet'>quiet</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_log_requests'>log_requests</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_which'>which</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rackup-instance_method">
  <h3 class='signature '>
    #<strong>rackup</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load <code>path</code> as a rackup file.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L257-L259'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='257' data-end='259'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 257</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rackup'>rackup</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_rackup'>rackup</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="restart_command-instance_method">
  <h3 class='signature '>
    #<strong>restart_command</strong>(cmd)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Command to use to restart puma. This should be just how to load puma itself (ie. &#39;ruby -Ilib bin/puma&#39;), not the arguments to puma, as those are the same as the original process.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L228-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='228' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 228</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_restart_command'>restart_command</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_restart_cmd'>restart_cmd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_default_host-instance_method">
  <h3 class='signature '>
    #<strong>set_default_host</strong>(host)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L60-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_default_host'>set_default_host</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_default_host'>default_host</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_host'>host</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_remote_address-instance_method">
  <h3 class='signature '>
    #<strong>set_remote_address</strong>(val = :socket)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Control how the remote address of the connection is set. This is configurable because to calculate the true socket peer address a kernel syscall is required which for very fast rack handlers slows down the handling significantly.</p>

<p>There are 4 possible values:</p>
<ul><li>
<p><code>:socket</code> (the default) - read the peername from the socket using the</p>

<pre class="code ruby"><code class="ruby">syscall. This is the normal behavior.
</code></pre>
</li><li>
<p><code>:localhost</code> - set the remote address to “127.0.0.1”</p>
</li><li>
<p>header: http_header - set the remote address to the value of the</p>

<pre class="code ruby"><code class="ruby">provided http header. For instance:
`set_remote_address header: &quot;X-Real-IP&quot;`.
Only the first word (as separated by spaces or comma)
is used, allowing headers such as X-Forwarded-For
to be used as well.
</code></pre>
</li><li>
<p>Any string - this allows you to hardcode remote address to any value</p>

<pre class="code ruby"><code class="ruby">you wish. Because puma never uses this field anyway, it&#39;s
format is entirely in your hands.
</code></pre>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L493-L513'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='493' data-end='513'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 493</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_remote_address'>set_remote_address</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='symbeg'>:</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_socket'>socket</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_localhost'>localhost</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_value'>value</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_value'>remote_address_value</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>when</span> <span class='const'><a href="../String.html" title="String (class)">String</a></span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_value'>value</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_value'>remote_address_value</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hdr'>hdr</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_header'>header</span><span class='rbracket'>]</span>
      <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address'>remote_address</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_header'>header</span>
      <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_remote_address_header'>remote_address_header</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP_</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_hdr'>hdr</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid value for set_remote_address - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid value for set_remote_address - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_val'>val</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="shutdown_debug-instance_method">
  <h3 class='signature '>
    #<strong>shutdown_debug</strong>(val = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When a shutdown is requested, the backtraces of all the threads will be written to $stdout. This can help figure out why shutdown is hanging.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L470-L472'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='470' data-end='472'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 470</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_shutdown_debug'>shutdown_debug</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_shutdown_debug'>shutdown_debug</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_bind-instance_method">
  <h3 class='signature '>
    #<strong>ssl_bind</strong>(host, port, opts)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L296-L305'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='305'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ssl_bind'>ssl_bind</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_verify'>verify</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_verify_mode'>verify_mode</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>JRUBY_VERSION</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_keystore_additions'>keystore_additions</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keystore=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_keystore'>keystore</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;keystore-pass=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_keystore_pass'>keystore_pass</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ssl://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_content'>?cert=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_cert'>cert</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;key=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_keystore_additions'>keystore_additions</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;verify_mode=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_verify'>verify</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_bind'>bind</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ssl://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_content'>?cert=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_cert'>cert</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;key=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;verify_mode=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_verify'>verify</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_path-instance_method">
  <h3 class='signature '>
    #<strong>state_path</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use <code>path</code> as the file to store the server info state. This is used by pumactl to query and control the server.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L310-L312'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='310' data-end='312'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 310</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_path'>state_path</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stdout_redirect-instance_method">
  <h3 class='signature '>
    #<strong>stdout_redirect</strong>(stdout = nil, stderr = nil, append = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Redirect STDOUT and STDERR to files specified.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L272-L276'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='272' data-end='276'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 272</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stdout_redirect'>stdout_redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_stdout'>stdout</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_append'>append</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_redirect_stdout'>redirect_stdout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_stdout'>stdout</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_redirect_stderr'>redirect_stderr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_redirect_append'>redirect_append</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_append'>append</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tag-instance_method">
  <h3 class='signature '>
    #<strong>tag</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Additional text to display in process listing</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L428-L430'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='428' data-end='430'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 428</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tag'>tag</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_tag'>tag</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tcp_mode-instance_method">
  <h3 class='signature '>
    #<strong>tcp_mode</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Run the app as a raw TCP app instead of an HTTP rack app</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L390-L392'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='390' data-end='392'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 390</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tcp_mode'>tcp_mode</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tcp'>tcp</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tcp_mode!-instance_method">
  <h3 class='signature '>
    #<strong>tcp_mode!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Run Puma in TCP mode</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L263-L265'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='263' data-end='265'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 263</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tcp_mode!'>tcp_mode!</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tcp'>tcp</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="threads-instance_method">
  <h3 class='signature '>
    #<strong>threads</strong>(min, max)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Configure <code>min</code> to be the minimum number of threads to use to answer requests and <code>max</code> the maximum.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L281-L294'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='281' data-end='294'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 281</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_threads'>threads</span><span class='lparen'>(</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_min'>min</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_max'>max</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The minimum (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>) number of threads must be less than or equal to the max (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_max'>max</span> <span class='op'>&lt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The maximum number of threads (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>) must be greater than 0</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_min_threads'>min_threads</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_min'>min</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_max_threads'>max_threads</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_boot_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_boot_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Set the timeout for workers to boot</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L441-L443'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='441' data-end='443'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 441</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_boot_timeout'>worker_boot_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_worker_boot_timeout'>worker_boot_timeout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_directory-instance_method">
  <h3 class='signature '>
    #<strong>worker_directory</strong>(dir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>DEPRECATED: The directory to operate out of.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L384-L387'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='384' data-end='387'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 384</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_directory'>worker_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>worker_directory is deprecated. Please use `directory`</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_directory'>directory</span> <span class='id identifier rubyid_dir'>dir</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_shutdown_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_shutdown_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Set the timeout for worker shutdown</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L446-L448'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='446' data-end='448'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 446</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_shutdown_timeout'>worker_shutdown_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_worker_shutdown_timeout'>worker_shutdown_timeout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_timeout-instance_method">
  <h3 class='signature '>
    #<strong>worker_timeout</strong>(timeout)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* Set the timeout for workers in seconds When set the master process will terminate any workers that have not checked in within the given <code>timeout</code>. This mitigates hung processes. Default value is 60 seconds.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L436-L438'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='436' data-end='438'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 436</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_timeout'>worker_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_worker_timeout'>worker_timeout</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="workers-instance_method">
  <h3 class='signature '>
    #<strong>workers</strong>(count)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>*Cluster mode only* How many worker processes to run.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/lib/puma/dsl.rb#L316-L318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='316' data-end='318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/puma/dsl.rb', line 316</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_workers'>workers</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_workers'>workers</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>